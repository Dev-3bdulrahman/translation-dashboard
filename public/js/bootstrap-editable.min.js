/*
 * Bootstrap Editable - Inline editing with Bootstrap
 * Copyright (c) 2023
 * https://github.com/bootstrap-editable
 */
(function($){"use strict";var Editable=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.editable.defaults,options);this.init()};Editable.prototype={constructor:Editable,init:function(){var $element=this.$element;$element.on('click.editable',$.proxy(function(e){e.preventDefault();e.stopPropagation();this.toggle()},this));$element.addClass('editable')},toggle:function(){if(this.$element.hasClass('editable-open')){this.hide()}else{this.show()}},show:function(){var $element=this.$element;var value=$element.text().trim();var $form=$('<form class="editable-form">');var $input=$('<textarea class="form-control">').val(value);var $buttons=$('<div class="editable-buttons mt-2">');var $submit=$('<button type="submit" class="btn btn-primary btn-sm me-1">OK</button>');var $cancel=$('<button type="button" class="btn btn-secondary btn-sm">Cancel</button>');$buttons.append($submit).append($cancel);$form.append($input).append($buttons);$element.after($form);$element.hide();$element.addClass('editable-open');$input.focus();$form.on('submit',$.proxy(function(e){e.preventDefault();var newValue=$input.val();this.save(newValue);},this));$cancel.on('click',$.proxy(function(){this.hide()},this))},hide:function(){var $element=this.$element;$element.show();$element.removeClass('editable-open');$element.next('.editable-form').remove();$element.trigger('hidden')},save:function(value){var $element=this.$element;var oldValue=$element.text().trim();var options=this.options;$element.text(value);$element.trigger('save',{newValue:value,oldValue:oldValue});if(options.pk){$.ajax({url:options.url,type:'POST',data:{name:options.name,value:value,pk:options.pk},success:function(response){$element.trigger('hidden','save')}})}else{$element.trigger('hidden','save')}}};$.fn.editable=function(option){return this.each(function(){var $this=$(this);var data=$this.data('editable');var options=typeof option==='object'&&option;if(!data)$this.data('editable',(data=new Editable(this,options)));if(typeof option==='string')data[option]()})};$.fn.editable.defaults={url:null,pk:null,name:null}})(jQuery);
